(function(document){"use strict";var toolbar;var api;var root;var steps;var hideSteps=[];var prev;var select;var next;var triggerEvent=function(el,eventName,detail){var event=document.createEvent("CustomEvent");event.initCustomEvent(eventName,true,true,detail);el.dispatchEvent(event)};var makeDomElement=function(html){var tempDiv=document.createElement("div");tempDiv.innerHTML=html;return tempDiv.firstChild};var selectOptionsHtml=function(){var options="";for(var i=0;i<steps.length;i++){if(hideSteps.indexOf(steps[i])<0){options=options+'<option value="'+steps[i].id+'">'+steps[i].id+"</option>"+"\n"}}return options};var addNavigationControls=function(event){api=event.detail.api;var gc=api.lib.gc;root=event.target;steps=root.querySelectorAll(".step");var prevHtml='<button id="impress-navigation-ui-prev" title="Previous" '+'class="impress-navigation-ui">&lt;</button>';var selectHtml='<select id="impress-navigation-ui-select" title="Go to" '+'class="impress-navigation-ui">'+"\n"+selectOptionsHtml()+"</select>";var nextHtml='<button id="impress-navigation-ui-next" title="Next" '+'class="impress-navigation-ui">&gt;</button>';prev=makeDomElement(prevHtml);prev.addEventListener("click",function(){api.prev()});select=makeDomElement(selectHtml);select.addEventListener("change",function(event){api.goto(event.target.value)});gc.addEventListener(root,"impress:steprefresh",function(event){steps=root.querySelectorAll(".step");select.innerHTML="\n"+selectOptionsHtml();select.value=event.target.id});next=makeDomElement(nextHtml);next.addEventListener("click",function(){api.next()});triggerEvent(toolbar,"impress:toolbar:appendChild",{group:0,element:prev});triggerEvent(toolbar,"impress:toolbar:appendChild",{group:0,element:select});triggerEvent(toolbar,"impress:toolbar:appendChild",{group:0,element:next})};document.addEventListener("impress:navigation-ui:hideStep",function(event){hideSteps.push(event.target);if(select){select.innerHTML=selectOptionsHtml()}},false);document.addEventListener("impress:init",function(event){toolbar=document.querySelector("#impress-toolbar");if(toolbar){addNavigationControls(event)}},false)})(document);