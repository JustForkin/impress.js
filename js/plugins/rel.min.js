(function(document,window){"use strict";var startingState={};var toNumber=function(numeric,fallback){return isNaN(numeric)?fallback||0:Number(numeric)};var toNumberAdvanced=function(numeric,fallback){if(typeof numeric!=="string"){return toNumber(numeric,fallback)}var ratio=numeric.match(/^([+-]*[\d\.]+)([wh])$/);if(ratio==null){return toNumber(numeric,fallback)}else{var value=parseFloat(ratio[1]);var multiplier=ratio[2]==="w"?window.innerWidth:window.innerHeight;return value*multiplier}};var computeRelativePositions=function(el,prev){var data=el.dataset;if(!prev){prev={x:0,y:0,z:0,relative:{x:0,y:0,z:0}}}var step={x:toNumber(data.x,prev.x),y:toNumber(data.y,prev.y),z:toNumber(data.z,prev.z),relative:{x:toNumberAdvanced(data.relX,prev.relative.x),y:toNumberAdvanced(data.relY,prev.relative.y),z:toNumberAdvanced(data.relZ,prev.relative.z)}};if(data.x!==undefined){step.relative.x=0}if(data.y!==undefined){step.relative.y=0}if(data.z!==undefined){step.relative.z=0}step.x=step.x+step.relative.x;step.y=step.y+step.relative.y;step.z=step.z+step.relative.z;return step};var rel=function(root){var steps=root.querySelectorAll(".step");var prev;startingState[root.id]=[];for(var i=0;i<steps.length;i++){var el=steps[i];startingState[root.id].push({el:el,x:el.getAttribute("data-x"),y:el.getAttribute("data-y"),z:el.getAttribute("data-z")});var step=computeRelativePositions(el,prev);el.setAttribute("data-x",step.x);el.setAttribute("data-y",step.y);el.setAttribute("data-z",step.z);prev=step}};window.impress.addPreInitPlugin(rel);document.addEventListener("impress:init",function(event){var root=event.target;event.detail.api.lib.gc.pushCallback(function(){var steps=startingState[root.id];var step;while(step=steps.pop()){if(step.x===null){step.el.removeAttribute("data-x")}else{step.el.setAttribute("data-x",step.x)}if(step.y===null){step.el.removeAttribute("data-y")}else{step.el.setAttribute("data-y",step.y)}if(step.z===null){step.el.removeAttribute("data-z")}else{step.el.setAttribute("data-z",step.z)}}delete startingState[root.id]})},false)})(document,window);